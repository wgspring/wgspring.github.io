
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="wgspring">
    <title>g++的使用 - wgspring</title>
    <meta name="author" content="wgspring">
    
        <meta name="keywords" content="wgspring,blog,">
    
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"wgspring","sameAs":["https://github.com/wgspring","mailto"]},"articleBody":"以下教程只适合linux系统\n1. 生成可执行文件当要求生成可执行文件时，要求代码里面一定要包含main函数，为程序入口。\n\n如果为单文件，例如main.cpp，执行：\n\ng++ main.cpp\n则会生成一个a.out文件，该文件即为可执行文件。终端执行./a.out即可\n\n\n\n如果希望生成的文件名可以指定，则可以使用-o参数执行：\n\ng++ main.cpp -o main\n其中main即为你期望生成的文件名\n\n\n\n如果为多个文件，可以使用g++ *.cpp来通配所有cpp文件\n\n\n2. 生成对象文件 – *.o选项 -c 用来告诉编译器编译源代码但不要执行链接，输出结果为对象文件。文件默认名与源码文件名相同，只是将其后缀变为 .o。\ng++ -c main.cpp\n上述命令会生成main.o\n2.1. 对象文件到可执行文件命令 g++ 能够直接识别 .o 文件并将其作为输入文件传递给链接器。\ng++ main.o或则g++ main.o -o main\n生成可执行文件a.out或则main\n3. 编译预处理选项 -E 使 g++ 将源代码用编译预处理器处理后不再执行其他动作。\ng++ -E main.cpp\n上述命令不会生成文件，只会打印预处理的信息，如果要保存到文件可以附加使用-o选项\n4. 生成汇编指令选项 -S 指示编译器将程序编译成汇编语言，输出汇编语言代码而後结束。\ng++ -S main.cpp\n5. 生成静态库静态库是编译器生成的一系列对象文件(*.o文件)的集合。链接一个程序时用库中的对象文件还是目录中的对象文件都是一样的。库中的成员包括普通函数，类定义，类的对象实例等等。静态库的另一个名字叫归档文件(archive)，管理这种归档文件的工具叫 ar 。\nar -r mylib.a object1.o object2.o\n5.1. 静态库到可执行文件命令 g++ 能够直接识别静态库 .a 文件并将其作为输入文件传递给链接器。\ng++ mylib.a\n6. 生成动态库g++ one.cpp two.cpp three.cpp -fPIC -shared -o libtest.so\n\n-shared：该选项指定生成动态连接库（让连接器生成T类型的导出符号表，有时候也生成弱连接W类型的导出符号），不用该标志外部程序无法连接。相当于一个可执行文件\n\n-fPIC：表示编译为位置独立的代码，不用此选项的话编译后的代码是位置相关的所以动态载入时是通过代码拷贝的方式来满足不同进程的需要，而不能达到真正代码段共享的目的。\n\n\n6.1. 动态库到可执行文件例如讲main.cpp和动态库libtest.so一起链接\ng++ main.cpp -L. -ltest -o main\n\n-L.：表示要连接的库在当前目录中，-L指定动态库目录，.表示当前目录\n-ltest：编译器查找动态连接库时有隐含的命名规则，即在给出的名字前面加上lib，后面加上.so来确定库的名称。-l指定连接的动态库名称，test表示libtest.so这个文件。\n\n6.2. 查看可执行程序链接了哪些库ldd main\n","dateCreated":"2020-01-04T10:20:38+08:00","dateModified":"2020-01-04T18:21:28+08:00","datePublished":"2020-01-04T10:20:38+08:00","description":"","headline":"g++的使用","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://wgspring.github.io/g/g++%E7%9A%84%E4%BD%BF%E7%94%A8/"},"publisher":{"@type":"Organization","name":"wgspring","sameAs":["https://github.com/wgspring","mailto"]},"url":"https://wgspring.github.io/g/g++%E7%9A%84%E4%BD%BF%E7%94%A8/"}</script>
    <meta name="description" content="以下教程只适合linux系统 1. 生成可执行文件当要求生成可执行文件时，要求代码里面一定要包含main函数，为程序入口。  如果为单文件，例如main.cpp，执行：  g++ main.cpp 则会生成一个a.out文件，该文件即为可执行文件。终端执行.&#x2F;a.out即可    如果希望生成的文件名可以指定，则可以使用-o参数执行：  g++ main.cpp -o main 其中main即为你">
<meta property="og:type" content="blog">
<meta property="og:title" content="g++的使用">
<meta property="og:url" content="https://wgspring.github.io/g/g++%E7%9A%84%E4%BD%BF%E7%94%A8/index.html">
<meta property="og:site_name" content="wgspring">
<meta property="og:description" content="以下教程只适合linux系统 1. 生成可执行文件当要求生成可执行文件时，要求代码里面一定要包含main函数，为程序入口。  如果为单文件，例如main.cpp，执行：  g++ main.cpp 则会生成一个a.out文件，该文件即为可执行文件。终端执行.&#x2F;a.out即可    如果希望生成的文件名可以指定，则可以使用-o参数执行：  g++ main.cpp -o main 其中main即为你">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-01-04T02:20:38.546Z">
<meta property="article:modified_time" content="2020-01-04T10:21:28.754Z">
<meta property="article:author" content="wgspring">
<meta property="article:tag" content="wgspring">
<meta property="article:tag" content="blog">
<meta name="twitter:card" content="summary">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-daxxak7tklmhrut22lc1vikw50t0gpzpcbb35ufnnkxxgh8oq8bapzeahhji.min.css">

    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/%20"
            aria-label=""
        >
            wgspring
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="打开链接: /#about"
            >
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/"
                            title="首页"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="分类"
                        >
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="标签"
                        >
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                            title="归档"
                        >
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                            title="搜索"
                        >
                    
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜索</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                            title="关于"
                        >
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">关于</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/wgspring" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/mailto"
                            title="邮箱"
                        >
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">邮箱</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            g++的使用
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2020-01-04T10:20:38+08:00">
	
		    1月 04, 2020
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/g/">g++</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>以下教程只适合<code>linux</code>系统</p>
<h2 id="1-生成可执行文件"><a href="#1-生成可执行文件" class="headerlink" title="1. 生成可执行文件"></a>1. 生成可执行文件</h2><p>当要求生成可执行文件时，要求代码里面一定要包含main函数，为程序入口。</p>
<ol>
<li><p>如果为单文件，例如<code>main.cpp</code>，执行：</p>
<ul>
<li><p><code>g++ main.cpp</code></p>
<p>则会生成一个<code>a.out</code>文件，该文件即为可执行文件。终端执行<code>./a.out</code>即可</p>
</li>
</ul>
</li>
<li><p>如果希望生成的文件名可以指定，则可以使用<code>-o</code>参数执行：</p>
<ul>
<li><p><code>g++ main.cpp -o main</code></p>
<p>其中<code>main</code>即为你期望生成的文件名</p>
</li>
</ul>
</li>
<li><p>如果为多个文件，可以使用<code>g++ *.cpp</code>来通配所有cpp文件</p>
</li>
</ol>
<h2 id="2-生成对象文件-–-o"><a href="#2-生成对象文件-–-o" class="headerlink" title="2. 生成对象文件 – *.o"></a>2. 生成对象文件 – *.o</h2><p>选项 -c 用来告诉编译器编译源代码但不要执行链接，输出结果为对象文件。文件默认名与源码文件名相同，只是将其后缀变为 .o。</p>
<p><code>g++ -c main.cpp</code></p>
<p>上述命令会生成<code>main.o</code></p>
<h3 id="2-1-对象文件到可执行文件"><a href="#2-1-对象文件到可执行文件" class="headerlink" title="2.1. 对象文件到可执行文件"></a>2.1. 对象文件到可执行文件</h3><p>命令 g++ 能够直接识别 .o 文件并将其作为输入文件传递给链接器。</p>
<p><code>g++ main.o</code>或则<code>g++ main.o -o main</code></p>
<p>生成可执行文件<code>a.out</code>或则<code>main</code></p>
<h2 id="3-编译预处理"><a href="#3-编译预处理" class="headerlink" title="3. 编译预处理"></a>3. 编译预处理</h2><p>选项 -E 使 g++ 将源代码用编译预处理器处理后不再执行其他动作。</p>
<p><code>g++ -E main.cpp</code></p>
<p>上述命令不会生成文件，只会打印预处理的信息，如果要保存到文件可以附加使用<code>-o</code>选项</p>
<h2 id="4-生成汇编指令"><a href="#4-生成汇编指令" class="headerlink" title="4. 生成汇编指令"></a>4. 生成汇编指令</h2><p>选项 -S 指示编译器将程序编译成汇编语言，输出汇编语言代码而後结束。</p>
<p><code>g++ -S main.cpp</code></p>
<h2 id="5-生成静态库"><a href="#5-生成静态库" class="headerlink" title="5. 生成静态库"></a>5. 生成静态库</h2><p>静态库是编译器生成的一系列对象文件(<code>*.o文件</code>)的集合。链接一个程序时用库中的对象文件还是目录中的对象文件都是一样的。库中的成员包括普通函数，类定义，类的对象实例等等。静态库的另一个名字叫归档文件(archive)，管理这种归档文件的工具叫 ar 。</p>
<p><code>ar -r mylib.a object1.o object2.o</code></p>
<h3 id="5-1-静态库到可执行文件"><a href="#5-1-静态库到可执行文件" class="headerlink" title="5.1. 静态库到可执行文件"></a>5.1. 静态库到可执行文件</h3><p>命令 g++ 能够直接识别静态库 <code>.a</code> 文件并将其作为输入文件传递给链接器。</p>
<p><code>g++ mylib.a</code></p>
<h2 id="6-生成动态库"><a href="#6-生成动态库" class="headerlink" title="6. 生成动态库"></a>6. 生成动态库</h2><p><code>g++ one.cpp two.cpp three.cpp -fPIC -shared -o libtest.so</code></p>
<ul>
<li><p><code>-shared</code>：该选项指定生成动态连接库（让连接器生成T类型的导出符号表，有时候也生成弱连接W类型的导出符号），不用该标志外部程序无法连接。相当于一个可执行文件</p>
</li>
<li><p><code>-fPIC</code>：表示编译为位置独立的代码，不用此选项的话编译后的代码是位置相关的所以动态载入时是通过代码拷贝的方式来满足不同进程的需要，而不能达到真正代码段共享的目的。</p>
</li>
</ul>
<h3 id="6-1-动态库到可执行文件"><a href="#6-1-动态库到可执行文件" class="headerlink" title="6.1. 动态库到可执行文件"></a>6.1. 动态库到可执行文件</h3><p>例如讲<code>main.cpp</code>和动态库<code>libtest.so</code>一起链接</p>
<p><code>g++ main.cpp -L. -ltest -o main</code></p>
<ul>
<li><code>-L.</code>：表示要连接的库在当前目录中，<code>-L</code>指定动态库目录，<code>.</code>表示当前目录</li>
<li><code>-ltest</code>：编译器查找动态连接库时有隐含的命名规则，即在给出的名字前面加上lib，后面加上.so来确定库的名称。<code>-l</code>指定连接的动态库名称，<code>test</code>表示<code>libtest.so</code>这个文件。</li>
</ul>
<h3 id="6-2-查看可执行程序链接了哪些库"><a href="#6-2-查看可执行程序链接了哪些库" class="headerlink" title="6.2. 查看可执行程序链接了哪些库"></a>6.2. 查看可执行程序链接了哪些库</h3><p><code>ldd main</code></p>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a
                        class="post-action-btn btn btn--disabled"
                        aria-hidden="true"
                    >
                        
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/hexo/%E6%8F%92%E4%BB%B6%E6%A0%87%E7%AD%BE/hexo%E4%B9%A6%E5%86%99%E6%96%87%E6%A1%A3%E6%8F%92%E5%85%A5%E4%BB%A3%E7%A0%81%E5%9D%97%E5%92%8C%E5%BC%95%E7%94%A8/"
                    data-tooltip="hexo书写文档插入代码块和引用"
                    aria-label="下一篇: hexo书写文档插入代码块和引用"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://wgspring.github.io/g/g++%E7%9A%84%E4%BD%BF%E7%94%A8/"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://wgspring.github.io/g/g++%E7%9A%84%E4%BD%BF%E7%94%A8/"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://wgspring.github.io/g/g++%E7%9A%84%E4%BD%BF%E7%94%A8/"
                    title="分享到 Google+"
                    aria-label="分享到 Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 wgspring. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a
                        class="post-action-btn btn btn--disabled"
                        aria-hidden="true"
                    >
                        
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/hexo/%E6%8F%92%E4%BB%B6%E6%A0%87%E7%AD%BE/hexo%E4%B9%A6%E5%86%99%E6%96%87%E6%A1%A3%E6%8F%92%E5%85%A5%E4%BB%A3%E7%A0%81%E5%9D%97%E5%92%8C%E5%BC%95%E7%94%A8/"
                    data-tooltip="hexo书写文档插入代码块和引用"
                    aria-label="下一篇: hexo书写文档插入代码块和引用"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://wgspring.github.io/g/g++%E7%9A%84%E4%BD%BF%E7%94%A8/"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://wgspring.github.io/g/g++%E7%9A%84%E4%BD%BF%E7%94%A8/"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://wgspring.github.io/g/g++%E7%9A%84%E4%BD%BF%E7%94%A8/"
                    title="分享到 Google+"
                    aria-label="分享到 Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://wgspring.github.io/g/g++%E7%9A%84%E4%BD%BF%E7%94%A8/"
                        aria-label="分享到 Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>分享到 Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://wgspring.github.io/g/g++%E7%9A%84%E4%BD%BF%E7%94%A8/"
                        aria-label="分享到 Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>分享到 Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=https://wgspring.github.io/g/g++%E7%9A%84%E4%BD%BF%E7%94%A8/"
                        aria-label="分享到 Google+"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>分享到 Google+</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">wgspring</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover-v1.2.0.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-sz3sxionvszurexlutkltvtcs6eo6soswf2uxgpgtd3dk9dmc1rbsivd5qvg.min.js"></script>

<!--SCRIPTS END-->


    




    </body>
</html>
